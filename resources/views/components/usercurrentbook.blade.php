
<div class = "row mt-2">
	<div class = "col-12 dashrowch2 mr-2" 
	
	x-init = "
	sorter = 17;
	setTimeout(() => $dispatch('stsload'), 7000);
	">
		<h5 class="mt-2 mb-0 fw-bold">
			&nbsp;Current Booking
		</h5>
		<div class="table-responsive w-auto mt-2" style="width:100%; height:100%; margin-left: 1rem; margin-right: 1rem;">
			
			<table class="table table-borderless text-center" id="table">
				<thead id='thead'>
					<tr>
						<th scope="col">BOOKING ID</th>
							<th scope="col" @click="advanced2 = !advanced2; ">TYPE <span x-show="advanced2 == false"><i class="ion-ios-arrow-down"></i></span><span x-show="advanced2 == true"><i class="ion-ios-arrow-up"></i></span></th>
				
						<th scope="col">ACCOMMODATION</th>
						<th scope="col">ITINERARY</th>
						<th scope="col">T.MEANS</th>
						<th scope="col">PARKING</th>
						<th scope="col">BOAT</th>
						<th scope="col">PURPOSE</th>
						<th scope="col">REMARK</th>
						<th scope="col">ACTION</th>
					</tr>
				</thead>
				<tbody>
					<template x-for="cbooking in currentBookings" :key="cbooking.id">
						<tr class="maintabletd" class="hover:bg-gray-200 text-gray-900 text-xs" 	
						
						x-data = "{  
						stsg: '',
						stscolor: '',
						stsclass: '',
						stslight: '',
						}"
						
						@stsload.window = "
					
					if (booking.status === 'PENDING') {	
					
					stscolor = 'black';
					stslight = '';
					stsclass = 'separator';
					} 
					else if (booking.status === 'ARRIVED') {
					
					stscolor = 'black';
					stslight = booking.color;
					stsclass = 'separator';
					} 
					
					else if (booking.status === 'CANCELLED') {
					
					stscolor = 'black';
					stslight = '#FFFDD0';
					stsclass = 'separator';
					}
					else if (booking.status === 'RESCHEDULED') {
					
					stscolor = 'black';;
					stslight = '#D3D3D3';
					stsclass = 'separator';
					}
					
					"  :style="'background: ' + stslight + ';'">
							
							<td id = "guesttd" 
							>
								{{---------------------------------Start Lead Guest Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}  
							
							<span id = "bookid">Booking # <span x-text="cbooking.id"></span>
							</span>
							
						
						{{---------------------------------End Lead Guest Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
					</td>
					
					<td id = "typetd">
						{{---------------------------------Start Visitor Type Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
						
						<table class="table table-borderless text-center" id="tablen2" :style="'background: ' + stslight + ';'">
							<tr>
								<td  id = "tottd2" colspan="2">
									D: ₱<span class = "dbinfot" x-text="cbooking.discount"></span>
								</td>
								<td id = "tottd2" colspan="2">
								
									<span class = "dbinfot" x-text="cbooking.totalvisitors"></span>
									<strong>GUESTS</strong>
									
									
									
								</td>
								<td id = "tottd2" colspan="2">
									N: ₱<span class = "dbinfot" x-text="cbooking.namount"></span>
								</td>
								
							</tr>
							
							
							<tr x-show="advanced2">
								<td class="tdborder" id = "totmtd">
									{{---------------------------------Start Total Male Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfon" x-text="cbooking.totalmale"></span>
									
									
									
									
									
									{{---------------------------------End Total Male Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								<td class="tdborder2">
									<strong>MALE</strong>
								</td>
								
								
								<td class="tdborder" id = "totftd">
									{{---------------------------------Start Total Female  Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfont" x-text="cbooking.totalfemale"></span>
									
									
									
									
									{{---------------------------------End Total Female Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								<td class="tdborder2">
									<strong>FEMALE</strong>
								</td>
								<td class="tdborder" id = "agetd">
									{{---------------------------------Start Priority Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									
									<span class = "dbinfon" x-text="cbooking.specialneeds" id ="spcspan"></span>
									
									
									
									
									
									
									{{---------------------------------End Priority Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								<td class="tdborder2">
									<strong>PRIORITY</strong>
								</td>
								
							</tr>
							<tr x-show="advanced2">
								
								<td class="tdborder" id = "nattd">
									{{---------------------------------Start Nationality 3 Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfon" x-text="cbooking.foreigners"></span>
									
									
									
									
									{{---------------------------------End Nationality Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								<td class="tdborder2">
									<strong>TOURIST</strong> 
								</td>
								
								<td class="tdborder" id = "nattd">
									{{---------------------------------Start Nationality 1 Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfon" x-text="cbooking.maubanins"></span>
									
									
									
									
									{{---------------------------------End Nationality Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								
								<td class="tdborder2">
									<strong>MAUBANIN</strong>
								</td>
								
								
								<td class="tdborder" id = "nattd">
									{{---------------------------------Start Nationality 2 Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfon" x-text="cbooking.filipinos"></span>
									
									
									
									
									
									{{---------------------------------End Nationality Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								<td class="tdborder2">
									<strong>FILIPINO</strong>
								</td>
								
								
								
								
							</tr>
							<tr x-show="advanced2">
								<td class="tdborder" id = "agetd">
									{{---------------------------------Start Age 1 Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfon" x-text="cbooking.zeroto7yold"></span>
									
									
									{{---------------------------------End Age Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								<td class="tdborder2">
									<strong>(0-7)Y.O.</strong>
								</td>
								<td class="tdborder" id = "agetd">
									{{---------------------------------Start Age 2 Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfon" x-text="cbooking.thirteento50yold" id = "maturespan"></span>	
									
									{{---------------------------------End Age Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								<td class="tdborder2">
									<strong>(13-50)Y.O.</strong>
								</td>
								<td class="tdborder" id = "agetd">
									{{---------------------------------Start Age 3 Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
									
									
									<span class = "dbinfon" x-text="cbooking.above60yold"></span>
									
									{{---------------------------------End Age Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
								</td>
								
								<td class="tdborder2">
									<strong>(60+)Y.O.</strong>
								</td>
								
								
							</tr>
							
						</table>
						
						
						{{---------------------------------End Visitor Type Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
					</td>
					
					<td id = "acctd">
						{{---------------------------------Start Accommodation Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}  
						<span class = "dbinfo" x-text="cbooking.accommodation"></span>
						{{---------------------------------Start Accommodation Type Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
					</td>
					
					<td id = "itrtd">
						{{---------------------------------Start Itinerary Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
						<span class = 'dbinfo'> (<span x-text="cbooking.itinerary"></span>)<br><br><span x-text="new Date(cbooking.arrival).toLocaleDateString('en-US', { year: '2-digit', month: '2-digit', day: '2-digit' } )"></span><br>↓<br><span x-text="new Date(cbooking.departure).toLocaleDateString('en-US', { year: '2-digit', month: '2-digit', day: '2-digit' } )"></span></span>
						{{---------------------------------End Itinerary Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
					</td>
					
					<td>
						{{---------------------------------Start Travel Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}  
						<span class="dbinfo" x-text="cbooking.travelmeans"></span>
						
						
						{{---------------------------------End Travel Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}  							
					</td>
					<td>
						{{---------------------------------Start Parking Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}
						<span class = 'dbinfo'><span class = "dbinfo" x-text="cbooking.parking"></span> </span>
						{{---------------------------------End Parking Column-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
					</td>
					
					<td>
						{{---------------------------------Start Boat Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}
						<span class = 'dbinfo'><span class = "dbinfo" x-text="cbooking.boating"></span> </span>
						{{---------------------------------End Boat Column-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
					</td>
					
					<td>
						{{---------------------------------Start Purpose Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}  
						<span class = 'dbinfo'> <span class = "dbinfo" x-text="cbooking.purpose"></span> </span>
						{{---------------------------------End Purpose Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}
					</td>
					
					<td id = "remtd">
						{{---------------------------------Start Remark Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
						<span x-text="cbooking.remark"></span><span x-show="cbooking.remark == NULL">N/A</span>
						{{---------------------------------End Remark Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
					</td>
					
					<td id = "acttd">
						{{---------------------------------Start Action Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}}
						<form action = "{{url('bookingstatus')}}" method ="POST" id="bookstatus" x-data = "statusform()" @submit.prevent="submitData">
							@csrf 
							<table class = "table table-borderless text-center" id = "tableact">
								<tr>
									
									<td>
										<button type="button" 
										class="btn actbtn" 
										title="CANCEL BOOKING" 
										data-bs-toggle="modal"
										data-bs-target="#cancelModal"
										@click = 'bookid = cbooking.id;'
										style="color: red;"
										:disabled = "cbooking.status == 'APPROVED' || cbooking.status == 'DENIED' || cbooking.status == 'DELINQUENT'">
											
											<i class="ion-md-exit"></i>
										</button>
										
									</td>
								</tr>
								
							</table>
							{{---------------------------------End Action Column--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------}} 
						</td>					
					</tr>
				</template>
				<tr x-show="currentBookings.length < 1">
					<td colspan="100%" class="text-center py-3 text-gray-900 text-sm"><p style="color: black; text-align: center; font-size: 1rem;">No booking yet? No worries—Cagbalete Island is just a <a href="{{url('/booking')}}">click</a> away!</p>
					</td>
				</tr>
			</tbody>
		</table>
		
	</div>
</div>


</div>






